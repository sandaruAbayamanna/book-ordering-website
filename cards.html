<head>
    <!-- importing the bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="cards.css">
</head>

<body>



<div class="main-cards d-flex justify-content-center">

  <div class="d-flex flex-wrap justify-content-start align-items-start gap-4">
    <div class="card mx-2 mb-4" style="width: 18rem;">
        <img src="images/book1.jpg" class="card-img-top" alt="..." height="250px">
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
          <p class="card-text" >Price: $XX.XX</p>
          <button class="btn btn-primary add-to-cart-button " data-id="1" data-name="Colombo" data-price="19.99" data-quantity="1">Add to Cart</button>
        </div>
      </div>

      <div class="card mx-2 mb-4" style="width: 18rem;">
        <img src="images/book2.jpg" class="card-img-top" alt="..." height="250px">
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
          <p class="card-text">Price: $XX.XX</p>
          <a href="#" class="btn btn-primary add-to-cart-button" data-id="2">Add to Cart</a>
        </div>
      </div>

      <div class="card mx-2" style="width: 18rem;">
        <img src="images/book3.jpg" class="card-img-top" alt="..." height="250px">
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
          <p class="card-text">Price: $XX.XX</p>
          <a href="#" class="btn btn-primary add-to-cart-button">Add to Cart</a>
        </div>
      </div>

      <div class="card mx-2" style="width: 18rem;">
        <img src="images/book4.jpg" class="card-img-top" alt="..." height="250px">
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
          <p class="card-text">Price: $XX.XX</p>
          <a href="#" class="btn btn-primary add-to-cart-button">Add to Cart</a>
        </div>
      </div>

      <div class="card mx-2" style="width: 18rem;">
        <img src="images/book5.jpg" class="card-img-top" alt="..." height="250px">
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
          <p class="card-text">Price: $XX.XX</p>
          <a href="#" class="btn btn-primary add-to-cart-button">Add to Cart</a>
        </div>
      </div>

      <div class="card mx-2" style="width: 18rem;">
        <img src="images/book6.jpg" class="card-img-top" alt="..." height="250px">
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
          <p class="card-text">Price: $XX.XX</p>
          <a href="#" class="btn btn-primary add-to-cart-button ">Add to Cart</a>
        </div>
      </div>

      <div class="card mx-2" style="width: 18rem;">
        <img src="images/book7.jpg" class="card-img-top" alt="..." height="250px">
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
          <p class="card-text">Price: $XX.XX</p>
          <a href="#" class="btn btn-primary add-to-cart-button">Add to Cart</a>
        </div>
      </div>

      <div class="card mx-2" style="width: 18rem;">
        <img src="images/book8.jpg" class="card-img-top" alt="..." height="250px">
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
          <p class="card-text">Price: $XX.XX</p>
          <a href="#" class="btn btn-primary add-to-cart-button">Add to Cart</a>
        </div>
      </div>

      <!-- <div class="card mx-2" style="width: 18rem;">
        <img src="images/book9.jpg" class="card-img-top" alt="..." height="250px">
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
          <p class="card-text">Price: $XX.XX</p>
          <a href="#" class="btn btn-primary">Purchase Me</a>
        </div>
      </div>

      <div class="card mx-2" style="width: 18rem;">
        <img src="images/book10.jpg" class="card-img-top" alt="..." height="250px">
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
          <p class="card-text">Price: $XX.XX</p>
          <a href="#" class="btn btn-primary">Purchase Me</a>
        </div>
      </div> -->

    </div>

  </div>

</div>

<!-- Include the script file
<script src="script.js"></script> -->

<script>
  // cards.html script code
  document.addEventListener('DOMContentLoaded', function () {
    // Add event listener to all "Add to Cart" buttons
    const addToCartButtons = document.querySelectorAll('.add-to-cart-button');
    addToCartButtons.forEach(button => {
      button.addEventListener('click', () => {
        // Send a message to the parent window (index.html) to indicate that the "Add to Cart" button is clicked
        window.parent.postMessage({ action: 'addToCart' }, '*');

         // Get the product details from the data attributes of the clicked button
      const productId = button.getAttribute('data-id');
      const productName = button.getAttribute('data-name');
      const productPrice = parseFloat(button.getAttribute('data-price'));
      const productQuantity = parseInt(button.getAttribute('data-quantity'));


      // Create an object for the item
      const item = {
        id: productId,
        name: productName,
        price: productPrice,
        quantity: productQuantity,
      };

      // Get the existing cart items from localStorage or create an empty array if it doesn't exist
      let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

      // Check if the item is already in the cart
      const existingItemIndex = cartItems.findIndex(item => item.id === productId);

      if (existingItemIndex !== -1) {
        // If the item is already in the cart, update its quantity
        cartItems[existingItemIndex].quantity++;
      } else {
        // If the item is not in the cart, add it to the cart
        cartItems.push(item);
      }

      // Save the updated cartItems array back to localStorage
      localStorage.setItem('cartItems', JSON.stringify(cartItems));
      });
    });
  });
</script>
</body>
  


